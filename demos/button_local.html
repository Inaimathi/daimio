<!doctype html> 
<html> 
<head> 
  <meta charset="utf-8">
  <title>Push My Button!</title>
  <script type="text/javascript" src="http://sherpa.local/~dann/katsu/nodely/__underscore.js"></script>
  <script type="text/javascript" src="http://sherpa.local/~dann/daimio/get.php?file=node_modules/daml"></script>
</head>

<body>

  <div>
    <p>The button has been pushed <span id="counter">0.707</span> times!</p>
  </div>
  
  <form id="button">
    <p><input type="submit" value="Click me!!"></p>
  </form>
  
  <script type="text/daml" id="hello_daimio">
  
   {:counter | gateway add type :dom-set-text thing __}

   {:button | gateway add type :dom-submit thing __}

   {@button
     → "{1 | add $count | > :count}"
     → @counter}
 
  </script>
   
  <script type="text/javascript">    
    document.addEventListener('DOMContentLoaded', function() {
      var code = document.getElementById('hello_daimio')
      DAML.run(code.text, function() {})
    })
  </script>
  
</body>
</html>