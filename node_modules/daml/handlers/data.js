// Commands for data: nodes and edges
// (c) dann toliver 2012

DAML.import_models({
  vars: {},
  data: {
    desc: "Fiddle with nodes or edges",
    help: "",
    methods: {

      add_noun: {
        desc: 'Add a noun',
        help: "",
        params: [
          {
            key: 'name',
            desc: 'Some kind of noun name',
            type: 'string',
            required: true,
          },
        ],
        fun: function(name) {
          var noun = {name: name};
          DAML.db.collection('nouns', function(err, c) {
            c.insert(noun); // sync-style is ok here, because we're not waiting for confirmation
          });
        },
      },

      find_noun: {
        desc: 'Find nouns',
        help: "",
        params: [],
        fun: function() {
          DAML.db.collection('nouns', function(err, c) {
            c.find().toArray(function(err, items) {
              global.output.push(items); /// FIXME!!!!!
            });
          });
        },
      },
    
    }
  }
});
